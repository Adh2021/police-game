<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>STATE TROOPER COMMANDER</title>
    <meta name="theme-color" content="#002366">
    <link rel="manifest" href="data:application/manifest+json,{'name':'Trooper Commander','short_name':'Commander','start_url':'.','display':'standalone','background_color':'#1a1a1a','theme_color':'#002366'}">
    <style>
        :root { --gold: #d4af37; --blue: #002366; --bg: #0d0d0d; --card-bg: #1e1e1e; --danger: #b22222; }
        body { background-color: var(--bg); color: #e0e0e0; font-family: 'Courier New', Courier, sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; height: 100vh; overflow: hidden; touch-action: manipulation; }
        #header { width: 100%; background: var(--blue); color: var(--gold); padding: 10px 0; text-align: center; font-weight: bold; font-size: 0.8em; letter-spacing: 2px; border-bottom: 2px solid var(--gold); }
        #stats-bar { display: grid; grid-template-columns: repeat(4, 1fr); width: 100%; background: #000; padding: 15px 0; border-bottom: 1px solid #333; }
        .stat-box { text-align: center; font-size: 0.7em; color: #888; }
        .stat-val { display: block; font-size: 1.8em; color: var(--gold); font-weight: bold; transition: all 0.3s; }
        .low-stat { color: var(--danger); text-shadow: 0 0 10px var(--danger); }
        #game-container { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; width: 95%; max-width: 450px; }
        #card { background: var(--card-bg); width: 85%; padding: 30px; border-radius: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.8); border: 2px solid #333; text-align: center; min-height: 320px; display: flex; flex-direction: column; justify-content: space-between; position: relative; }
        #character { color: var(--gold); font-weight: bold; text-transform: uppercase; margin-bottom: 10px; font-size: 0.9em; border-bottom: 1px solid #333; padding-bottom: 5px; }
        #scenario { font-size: 1.1em; line-height: 1.4; margin: 20px 0; }
        .choice-container { display: flex; gap: 10px; width: 100%; }
        .choice-btn { flex: 1; padding: 18px 5px; border: none; border-radius: 8px; font-weight: bold; font-size: 0.85em; cursor: pointer; transition: transform 0.1s; }
        .btn-a { background: #333; color: white; border: 1px solid #555; }
        .btn-b { background: var(--blue); color: white; border: 1px solid var(--gold); }
        .choice-btn:active { transform: scale(0.95); }
        #overlay { display: none; position: fixed; top:0; left:0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 100; flex-direction: column; align-items: center; justify-content: center; text-align: center; padding: 20px; }
    </style>
</head>
<body>
    <div id="header">NC STATE HIGHWAY PATROL - COMMANDER TERMINAL</div>
    <div id="stats-bar">
        <div class="stat-box">FAM <span id="fa" class="stat-val">50</span></div>
        <div class="stat-box">DEPT <span id="de" class="stat-val">50</span></div>
        <div class="stat-box">PUB <span id="pu" class="stat-val">50</span></div>
        <div class="stat-box">HLTH <span id="he" class="stat-val">50</span></div>
    </div>
    <div id="game-container">
        <div id="card">
            <div><div id="character">MDT INITIALIZING...</div><div id="scenario">Swipe or click to begin your command...</div></div>
            <div class="choice-container">
                <button id="btnA" class="choice-btn btn-a" onclick="makeChoice('A')">REJECT</button>
                <button id="btnB" class="choice-btn btn-b" onclick="makeChoice('B')">ACCEPT</button>
            </div>
        </div>
    </div>
    <div id="overlay">
        <h1 id="death-title" style="color:var(--danger)">TERMINATED</h1>
        <p id="death-msg" style="color:#ccc; font-size:1.2em; max-width:400px;"></p>
        <button class="choice-btn btn-b" onclick="location.reload()" style="padding:20px 40px; margin-top:30px;">REBOOT SYSTEM</button>
    </div>

<script>
    let currentIdx = 0;
    let stats = { fa: 50, de: 50, pu: 50, he: 50 };

    const deck = [
        { char: "Governor", text: "Deploy 50 units for a 'show of force' on I-95 corridor to increase revenue?", a: "Not enough men", b: "Deploy", resA: {pu:-25, de:15, fa:5}, resB: {pu:25, de:-20, he:-10} },
        { char: "Wife", text: "The neighbor's kid got a ticket. Can you 'make it disappear'?", a: "Law is the law", b: "Void it", resA: {fa:-30, de:20, pu:10}, resB: {fa:20, de:-25, pu:-15} },
        { char: "Sgt. Miller", text: "A Trooper totaled a cruiser in a 130mph chase. Ban pursuits?", a: "Ban them", b: "Let 'em drive", resA: {pu:15, de:-30, he:10}, resB: {pu:-20, de:30, he:-15} },
        { char: "K9 Handler", text: "Found $100k cash in a trunk, but no drugs. Seize the money?", a: "Let it go", b: "Civil Forfeiture", resA: {de:-20, pu:20}, resB: {de:30, pu:-30} },
        { char: "Health", text: "8 hours in a cruiser seat has your back in spasms. Therapy?", a: "Push through", b: "Sick Day", resA: {he:-25, de:10}, resB: {he:25, de:-15, fa:10} },
        { char: "Cartel Lawyer", text: "Drop the drug charges against my client for a $50k 'donation'?", a: "Arrest him", b: "Accept", resA: {pu:20, de:10}, resB: {fa:50, pu:-50, de:-50} },
        { char: "Sgt. Miller", text: "The recruits' shooting scores are failing. Mandatory range time?", a: "Save on ammo", b: "Range day", resA: {de:-20, pu:10}, resB: {de:25, he:-15} },
        { char: "Senator", text: "My nephew wants to skip the Academy and start today. Permit it?", a: "No", b: "Welcome him", resA: {de:20, pu:10}, resB: {de:-35, fa:20, pu:-15} },
        { char: "Wife", text: "You missed our anniversary for a pileup. I'm staying at Mom's.", a: "Duty first", b: "Beg for mercy", resA: {fa:-30, de:15}, resB: {fa:20, de:-15} },
        { char: "Reporter", text: "Is it true you're using 'unmarked' Dodge Challengers for traps?", a: "Deny it", b: "It's interception", resA: {pu:15, de:-20}, resB: {pu:-25, de:30} },
        { char: "Local Sheriff", text: "Your Troopers are writing tickets in my county. Pull back.", a: "My state, my road", b: "Respect turf", resA: {de:25, pu:-15}, resB: {de:-25, pu:20} },
        { char: "Sgt. Miller", text: "The boys want 'Enhanced' interrogation for this dealer. Yes?", a: "Procedure", b: "Get results", resA: {pu:30, de:-20}, resB: {de:30, pu:-45} },
        { char: "Governor", text: "The protesters are on the Interstate. Clear them with gas?", a: "Talk them off", b: "Use gas", resA: {pu:30, de:-30}, resB: {pu:-50, de:40} },
        { char: "Shadowy Figure", text: "I can wipe your digital footprint for a small favor later...", a: "No deal", b: "Deal", resA: {he:10}, resB: {fa:40, pu:-30, de:-30} },
        { char: "Health", text: "You're living on Red Bull and jerky. Your heart is skipping beats.", a: "One more can", b: "Drink water", resA: {he:-35, de:20}, resB: {he:20, de:-10} }
    ];

    function makeChoice(choice) {
        let card = deck[currentIdx];
        let res = (choice === 'A') ? card.resA : card.resB;
        for (let s in res) stats[s] = Math.min(100, Math.max(0, stats[s] + res[s]));
        currentIdx++;
        updateUI();
    }

    function updateUI() {
        for (let s in stats) {
            let el = document.getElementById(s);
            el.innerText = stats[s];
            el.classList.toggle('low-stat', stats[s] <= 15);
        }
        if (currentIdx >= deck.length) { victory(); return; }
        let card = deck[currentIdx];
        document.getElementById('character').innerText = card.char;
        document.getElementById('scenario').innerText = card.text;
        document.getElementById('btnA').innerText = card.a;
        document.getElementById('btnB').innerText = card.b;
        checkDeath();
    }

    function checkDeath() {
        if (stats.fa <= 0) endGame("DIVORCED", "The locks are changed. You're married to the road now.");
        if (stats.de <= 0) endGame("MUTINY", "Sgt. Miller took your badge. Your Troopers don't salute you.");
        if (stats.pu <= 0) endGame("RIOT", "A mob flipped your car. The Governor fired you for the optics.");
        if (stats.he <= 0) endGame("FLATLINE", "The stress finally burst your heart. At least the funeral is big.");
        if (stats.fa >= 100 || stats.de >= 100) endGame("POLICE STATE", "You became a tyrant. The Feds came to remove you.");
    }

    function endGame(title, msg) {
        document.getElementById('overlay').style.display = 'flex';
        document.getElementById('death-title').innerText = title;
        document.getElementById('death-msg').innerText = msg;
    }

    function victory() {
        endGame("THE LEGEND", "You finished the tour. Your name is on the wall of heroes.");
        document.getElementById('death-title').style.color = "var(--gold)";
    }

    updateUI();
</script>
</body>
</html>
